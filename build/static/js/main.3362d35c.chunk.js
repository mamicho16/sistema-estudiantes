(this.webpackJsonpsistema_estudiantes=this.webpackJsonpsistema_estudiantes||[]).push([[0],{135:function(e,a,t){e.exports=t.p+"static/media/fotoP.e647a224.png"},138:function(e,a,t){e.exports=t.p+"static/media/faviconTD.19086bdd.ico"},139:function(e,a,t){e.exports=t.p+"static/media/tec.421bf85a.png"},140:function(e,a,t){e.exports=t.p+"static/media/logotec.c3695aa9.png"},160:function(e,a,t){e.exports=t(313)},170:function(e,a,t){},176:function(e,a,t){},179:function(e,a,t){},180:function(e,a,t){},181:function(e,a,t){},182:function(e,a,t){},183:function(e,a,t){},184:function(e,a,t){},185:function(e,a,t){},186:function(e,a,t){},187:function(e,a,t){},188:function(e,a,t){},189:function(e,a,t){},190:function(e,a,t){},191:function(e,a,t){},192:function(e,a,t){},193:function(e,a,t){},194:function(e,a,t){},195:function(e,a,t){},196:function(e,a,t){},310:function(e,a,t){},311:function(e,a,t){},312:function(e,a,t){},313:function(e,a,t){"use strict";t.r(a);var n,l=t(0),o=t.n(l),r=(t(162),t(129)),c=t.n(r),s=t(18),i=t(6),m=t(44),d=t(45);var u=d.a.div(n||(n=Object(m.a)(["\nbackground: #fff;\nwidth: 50%;\nmax-width: 70rem; /* 1110px */\nheight: 50vh;\nmax-height: 50rem;  /* 800px */\nbox-shadow: 0px 1.25rem 2.5rem rgba(0,0,0,.05);\nborder-radius: 2rem; /* 10px */\nmargin: 25vh auto 0 auto; /* Margen superior variable para evitar pegarse arriba */\ndisplay: flex;\nflex-direction: column;\njustify-content: space-between; /* Centra el contenido verticalmente dentro del contenedor */\nposition: relative;\nz-index: 100;\n\n@media(max-width: 60rem){ /* 950px */\n    height: 95vh;\n    max-height: none;\n    margin-top: 2.5vh; /* Margen superior ajustado para mantener el contenedor centrado verticalmente */\n}\n"]))),E=t(11),b=(t(170),t(321)),p=t(323),g=t(137),v=t(318),f=t(135),h=t.n(f);var y,j,O={fondo:"#F9F9F9",colorPrimario:"#5B69E2",colorSecundario:"#000",verde:"#43A854",rojo:"#E34747",grisClaro:"#E8EFF1",grisClaro2:"#CBDDE2",azulClaro:"#8792F1"};const N=Object(d.b)(y||(y=Object(m.a)(["\n    0% {\n        transform: translateY(-1.25rem); /* 20px */\n        opacity: 0;\n    }\n \n    10% {\n        transform: translateY(1.25rem);\n        opacity: 1;\n    }\n    \n    90% {\n        transform: translateY(1.25rem);\n        opacity: 1;\n    }\n \n    100% {\n        transform: translateY(1.25rem);\n        opacity: 0;\n    }\n"]))),w=d.a.div(j||(j=Object(m.a)(["\n    z-index: 1000;\n    width: 100%;\n    left: 0;\n    top: 1.25rem; /* 20px */\n    position: fixed;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    animation: "," 4s ease forwards;\n \n    p {\n \n        background: ",";\n        color: #fff;\n        padding: 1.25rem 2.5rem; /* 20px 40px */\n        border-radius: 0.31rem; /* 5px */\n        box-shadow: 0px 0px 15px rgba(0,0,0,.1);\n        text-align: center;\n    }\n"])),N,e=>"error"===e.tipo?O.rojo:"exito"===e.tipo?O.verde:"#000");var C=e=>{let{tipo:a,mensaje:t,estadoAlerta:n,setestadoAlerta:r}=e;return Object(l.useEffect)(()=>{let e;return n&&(e=setTimeout(()=>{r(!1)},4e3)),()=>clearTimeout(e)},[n,r]),o.a.createElement(o.a.Fragment,null,n&&o.a.createElement(w,{tipo:a},o.a.createElement("p",null,t)))},S=t(136),x=t(2),k=t(24),A=t(10);Object(S.a)({apiKey:"AIzaSyCVrV5IgyK-bhOkWK_uaej0xQM_qKbo-QA",authDomain:"sistema-estudiantes-92461.firebaseapp.com",projectId:"sistema-estudiantes-92461",storageBucket:"sistema-estudiantes-92461.appspot.com",messagingSenderId:"765619084054",appId:"1:765619084054:web:6ffcca06160a1cf7758e37",measurementId:"G-FT7R7KJREC"});const D=Object(x.g)(),T=Object(k.b)(),L=Object(A.b)(),F=Object(l.createContext)(),P=()=>{const e=Object(l.useContext)(F);if(!e)throw new Error("useAuth debe ser usado dentro de un AuthProvider");return e},R=e=>{let{children:a}=e;const[t,n]=Object(l.useState)(null),[r,c]=Object(l.useState)(!0);async function s(e){c(!0);const a=await async function(e){let a=localStorage.getItem("userDetails");if(a)return JSON.parse(a);{let a=await i(e);return a||(a=await m(e)),a||(a=await d(e)),a?(localStorage.setItem("userDetails",JSON.stringify(a)),a):null}}(e);n(a),c(!1)}Object(l.useEffect)(()=>Object(k.c)(T,e=>{e?s(e.uid):(n(null),c(!1))}),[]);const i=async e=>{const a=Object(x.d)(D,"Profesores/".concat(e)),t=await Object(x.e)(a);return t.exists()?(console.log("Datos del profesor:",t.data()),t.data()):(console.log("No se encontr\xf3 el documento del profesor"),null)},m=async e=>{const a=Object(x.d)(D,"Admins/".concat(e)),t=await Object(x.e)(a);return t.exists()?(console.log("Datos del administrador:",t.data()),t.data()):(console.log("No se encontr\xf3 el documento del administrador"),null)},d=async e=>{const a=Object(x.d)(D,"Estudiantes/".concat(e)),t=await Object(x.e)(a);return t.exists()?(console.log("Datos del estudiante:",t.data()),t.data()):(console.log("No se encontr\xf3 el documento del estudiante"),null)};return o.a.createElement(F.Provider,{value:{user:t,login:async(e,a)=>{try{const t=(await Object(k.e)(T,e,a)).user;if(!t.uid)throw new Error("UID del usuario no est\xe1 disponible");let l,o=await i(t.uid);if(o||(o=await m(t.uid)),o||(o=await d(t.uid)),!o)throw new Error("No se pudieron obtener los datos del usuario");return l=o.hasOwnProperty("coordinador")?{uid:t.uid,email:t.email,nombre:o.nombre,nombre2:o.nombre2,apellido1:o.apellido1,apellido2:o.apellido2,codigo:o.codigo,celular:o.celular,numOficina:o.numOficina,foto:o.foto,coordinador:o.coordinador,estado:o.estado,sede:o.sede}:o.hasOwnProperty("estudiante")?{uid:t.uid,email:t.email,nombre:o.nombre,nombre2:o.nombre2,apellido1:o.apellido1,apellido2:o.apellido2,codigo:o.codigo,celular:o.celular,numOficina:o.numOficina,foto:o.foto,estudiante:o.estudiante,estado:o.estado,sede:o.sede}:{uid:t.uid,email:t.email,nombre:o.nombre,nombre2:o.nombre2,apellido1:o.apellido1,apellido2:o.apellido2,celular:o.celular,sede:o.sede},console.log(l),n(l),!0}catch(t){return console.error("Error en el login:",t),!1}},register:async(e,a)=>{try{const t=(await Object(k.a)(T,e,a).then(e=>e)).user,n=Object(x.d)(D,"Profesores/".concat(t.uid));Object(x.k)(n,{email:e,nombre:"Rafael",nombre2:"Mauricio",apellido1:"Arroyo",apellido2:"Herrera",codigo:"CA-01",celular:"88888888",numOficina:"1",foto:"",coordindor:!1,estado:"activo"})}catch(t){console.log(t)}},logout:async()=>{try{await Object(k.f)(T),n(null),localStorage.removeItem("userDetails"),console.log(t)}catch(e){console.log(e)}},registerAdmin:async(e,a)=>{try{const t=(await Object(k.a)(T,e,a).then(e=>e)).user,n=Object(x.d)(D,"Admins/".concat(t.uid));Object(x.k)(n,{email:e,nombre:"Ariana",nombre2:"",apellido1:"Guillen",apellido2:"Masis",celular:"12345678",sede:"San Jose"})}catch(t){console.log(t)}},fetchUserDetails:s,actualizarUser:async e=>{const a=["Profesores","Admins","Estudiantes"];for(const t of a){const a=Object(x.i)(Object(x.b)(D,t),Object(x.m)("email","==",e)),l=await Object(x.f)(a);if(!l.empty){const e=l.docs[0].data();n(e),localStorage.setItem("userDetails",JSON.stringify(e));break}}}}},!r&&a)};var G,I=()=>{const{login:e,register:a,registerAdmin:t}=P(),n=Object(i.q)(),[r,c]=Object(l.useState)(""),[s,m]=Object(l.useState)(""),[d,f]=Object(l.useState)(!1),[y,j]=Object(l.useState)({}),O=e=>{"email"===e.target.id?c(e.target.value):m(e.target.value)};return o.a.createElement(o.a.Fragment,null,o.a.createElement(E.a,null,o.a.createElement("title",null,"Iniciar sesi\xf3n")),o.a.createElement(u,null,o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"row img"},o.a.createElement("div",{className:"col"},o.a.createElement("img",{src:h.a,alt:"fotoP",className:"mx-auto"})),o.a.createElement("div",{className:"col centered-column"},o.a.createElement("h1",{className:"h1-custom"}," Ingrese su usuario "),o.a.createElement(b.a,{id:"form",onSubmit:async a=>{a.preventDefault(),f(!1),j({});const t=/[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+/.test(r);if(""===s||""===r)return f(!0),void j({tipo:"error",mensaje:"Todos los campos son obligatorios"});if(!t)return f(!0),void j({tipo:"error",mensaje:"Correo no v\xe1lido"});try{await e(r,s)?n("/"):(f(!0),j({tipo:"error",mensaje:"No se pudo iniciar sesi\xf3n"}))}catch(l){console.error("Error en login:",l),f(!0),j({tipo:"error",mensaje:"No se pudo iniciar sesi\xf3n"})}}},o.a.createElement(b.a.Group,{className:"input-control"},o.a.createElement(b.a.Label,{htmlFor:"email"}," "),o.a.createElement(p.a,null,o.a.createElement(g.a,{type:"email",id:"email",value:r,placeholder:"Email",onChange:O}),o.a.createElement("div",{className:"error"}))),o.a.createElement(b.a.Group,{className:"input-control"},o.a.createElement(b.a.Label,{htmlFor:"password"}),o.a.createElement(p.a,null,o.a.createElement(g.a,{type:"password",id:"password",value:s,placeholder:"Password",onChange:O}),o.a.createElement("div",{className:"error"}))),o.a.createElement("div",{className:"text-center h-custom"},o.a.createElement("a",{href:"/forgot-password",className:"forgot-password-link"},"\xbfOlvid\xf3 su contrase\xf1a?"),o.a.createElement(v.a,{className:"boton",type:"submit",id:"submit"},"Log In"))))))),o.a.createElement(C,{tipo:y.tipo,mensaje:y.mensaje,estadoAlerta:d,setestadoAlerta:f}))},B=t(138),U=t.n(B);var _=d.a.div(G||(G=Object(m.a)(["\n    background-color: #B7D0FF; // Color de fondo azul\n    height: 100vh; // Altura completa de la vista\n    width: 100vw; // Ancho completo de la vista\n    position: fixed; // Posicionamiento fijo respecto a la ventana del navegador\n    top: 0; // Inicio en la parte superior de la ventana\n    left: 0; // Inicio en la parte izquierda de la ventana\n    z-index: -1; // Establecer el \xedndice Z negativo para enviar al fondo\n    display: flex;\n    justify-content: center;\n    align-items: center;\n"]))),z=t(319),q=t(320);t(176);var M=e=>{let{titulo:a}=e;const{logout:t}=P(),n=Object(i.q)();return o.a.createElement(z.a,{bg:"light",variant:"light",className:"navbar"},o.a.createElement(z.a.Brand,{className:"brand",onClick:()=>{n("/inicio")}},a),o.a.createElement(q.a,{className:"nav"},o.a.createElement(q.a.Link,{onClick:()=>{n("/perfil")},style:{color:"#2A67C3"}}," Ver perfil"),o.a.createElement(q.a.Link,{onClick:async()=>{t(),n("/iniciarsesion")},style:{color:"#2A67C3"}}," Cerrar sesi\xf3n")))},H=t(139),J=t.n(H),Y=t(140),K=t.n(Y);t(179);var W=()=>{const{user:e,updateUser:a}=P(),t=Object(i.q)();let n=!1,l=!1,r=!1;void 0===e.coordinador?void 0===e.estudiante?n=!0:e.estudiante&&(r=!0):l=!!e.coordinador;return o.a.createElement(o.a.Fragment,null,o.a.createElement(E.a,null,o.a.createElement("title",null,"Inicio - Tecnol\xf3gico de Costa Rica")),o.a.createElement("div",null,o.a.createElement(M,{titulo:"Inicio"}),o.a.createElement("div",{className:"logo-image"},o.a.createElement("img",{src:K.a,alt:"Tecnol\xf3gico de Costa Rica"})),o.a.createElement("div",{className:"main-image"},o.a.createElement("img",{src:J.a,alt:"Tecnol\xf3gico de Costa Rica"})),o.a.createElement("div",{className:"subtitulo"},o.a.createElement("h1",null," Que desea realizar? ")),o.a.createElement("div",{className:"button-container"},n&&o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{className:"menu-button",onClick:()=>{t("/edicionGuia")}},"Informaci\xf3n Profesores"),o.a.createElement("button",{className:"menu-button",onClick:()=>{t("/historial")}},"Historial Profesores"),o.a.createElement("button",{className:"menu-button",onClick:()=>{t("/ListaDeEstudiantes")}},"Lista Estudiantes")),r&&o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{className:"menu-button",onClick:()=>{t("/BuzonEntrada")}},"Buzon de Entrada"),o.a.createElement("button",{className:"menu-button",onClick:()=>{t("/calendarioEstudiantes")}},"Calendario")),!r&&o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{className:"menu-button",onClick:()=>{t("/equipoGuia")}},"Equipo Guia"),o.a.createElement("button",{className:"menu-button",onClick:()=>{t("/planTrabajoGuia")}},"Plan de Trabajo")),!n&&!r&&o.a.createElement("button",{className:"menu-button",onClick:()=>{t("/ListaDeEstudiantesProfesores")}},"Lista Estudiantes"))))};t(180);var Z=e=>{let{user:a}=e;return o.a.createElement("div",{className:"user-card"},o.a.createElement("div",{className:"user-info"},o.a.createElement("img",{src:a.imageUrl,alt:"user",className:"user-image"}),o.a.createElement("div",{className:"user-name"},a.name)),o.a.createElement("div",{className:"user-details"},o.a.createElement("div",null,o.a.createElement("strong",null,"Sede:")," ",a.location),o.a.createElement("div",null,o.a.createElement("strong",null,"Codigo:")," ",a.code),o.a.createElement("div",null,o.a.createElement("strong",null,"Correo Electronico:")," ",a.email),o.a.createElement("div",null,o.a.createElement("strong",null,"N\xfamero Oficina:")," ",a.officeNumber),o.a.createElement("div",null,o.a.createElement("strong",null,"Telefono Celular:")," ",a.cellNumber),o.a.createElement("div",null,o.a.createElement("strong",null,"Coordinador:")," ",a.coordinador?"S\xed":"No")))};t(84),t(181);const Q=e=>{const a=e.name.split(" "),t=a[0]||"",n=a.length>1?a[1]:"",l=a.length>2?a[2]:"",o=a.length>3?a[3]:"";return{email:e.email,nombre:t,nombre2:n,apellido1:l,apellido2:o,celular:e.cellNumber,numOficina:e.officeNumber,coordinador:e.coordinador||!1,sede:e.location.trim()}},V=async(e,a,t,n,l,o,r,c,s,i,m,d)=>{if(function(e,a,t,n,l,o,r,c,s,i,m){const d="string"===typeof e&&""!==e.trim()&&"string"===typeof r||null===r&&"string"===typeof c&&""!==c.trim()&&"string"===typeof s||null===r,u="string"===typeof a||null===a||void 0===a,E=["San Jose","Cartago","Limon","Alajuela","San Carlos"].includes(t),b="string"===typeof n&&""!==n.trim(),p="string"===typeof l,g=8===o.length,v="boolean"===typeof i,f="boolean"===typeof m;return console.log(d,u,E,b,p,g,v,f),d&&u&&E&&b&&p&&g&&f&&v}(e,a,t,n,l,o,r,c,s,i,m))try{const u=await Object(k.a)(T,n,d),E=await async function(e,a,t,n,l,o,r,c,s,i,m,d){let u,E=l.substring(0,4)+"-"+l.substring(4),b=o.substring(0,4)+"-"+o.substring(4);if("San Jose"===t){const e=await $("SJ"),a=1;await ee(e.id,{cont:a}),u="SJ-".concat(e.count)}else if("Cartago"===t){const e=await $("CA"),a=e.count+1;await ee(e.id,{cont:a}),u="CA-".concat(e.count)}else if("San Carlos"===t){const e=await $("SC"),a=e.count+1;await ee(e.id,{cont:a}),u="SC-".concat(e.count)}else if("Alajuela"===t){const e=await $("AL"),a=e.count+1;await ee(e.id,{cont:a}),u="AL-".concat(e.count)}else if("Limon"===t){const e=await $("LI"),a=e.count+1;await ee(e.id,{cont:a}),u="LI-".concat(e.count)}return{nombre:e,nombre2:r,apellido1:c,apellido2:s,foto:a,sede:t,email:n,numOficina:E,celular:b,codigo:u,coordinador:i,estado:m}}(e,a,t,n,l,o,r,c,s,i,m),b=Object(x.d)(D,"Profesores/".concat(u.user.uid));Object(x.k)(b,E)}catch(u){console.error("Error adding document or creating user: ",u)}else console.error("Invalid professor data")},X=async()=>{try{const e=await Object(x.f)(Object(x.b)(D,"Profesores"));return e.docs.map(e=>({id:e.id,...e.data()}))}catch(e){return console.error("Error fetching documents: ",e),[]}};async function $(e){try{const a=(await Object(x.f)(Object(x.b)(D,"Contador"))).docs.find(a=>a.data().Name===e);return a?{id:a.id,count:a.data().cont}:null}catch(a){return console.error("Error fetching contador: ",a),null}}async function ee(e,a){try{Object(x.l)(Object(x.d)(D,"Contador",e),a)}catch(t){console.error("Error updating contador: ",t)}}var ae=()=>{const[e,a]=Object(l.useState)(""),[t,n]=Object(l.useState)([]);o.a.useEffect(()=>{(async()=>{try{const e=(await X()).map(e=>({name:e.nombre+" "+e.nombre2+" "+e.apellido1+" "+e.apellido2,imageUrl:e.foto,location:e.sede+" ",code:e.codigo,email:e.email,officeNumber:e.numOficina,cellNumber:e.celular}));n(e)}catch(e){console.error("Error fetching professors: ",e)}})()},[]);const r=t.filter(a=>a.name.toLowerCase().includes(e.toLowerCase())||a.location.toLowerCase().includes(e.toLowerCase()));return o.a.createElement(o.a.Fragment,null,o.a.createElement(M,{titulo:"Historial"}),o.a.createElement(E.a,null,o.a.createElement("title",null,"Historial - Tecnol\xf3gico de Costa Rica")),o.a.createElement("div",{className:".subtituloH"},o.a.createElement("h1",null," Historial docentes asignados ")),o.a.createElement("div",{className:"card-container"},r.map(e=>o.a.createElement(Z,{key:e.email,user:e}))),o.a.createElement("div",null,o.a.createElement("div",{className:"search-bar-container"},o.a.createElement("input",{type:"text",placeholder:"Ingrese la sede",value:e,onChange:e=>a(e.target.value)}))))};const te=()=>{const{user:e}=P();return null===e?o.a.createElement(i.a,{to:"/iniciarsesion"}):o.a.createElement(i.b,null)};t(182);var ne=()=>{const[e,a]=Object(l.useState)(""),[t,n]=Object(l.useState)([]),[r,c]=Object(l.useState)("");o.a.useEffect(()=>{(async()=>{try{const e=await X(),a=e.filter(e=>!0===e.estado).map(e=>({name:"".concat(e.nombre," ").concat(e.nombre2||""," ").concat(e.apellido1," ").concat(e.apellido2),imageUrl:e.foto,location:e.sede,code:e.codigo,email:e.email,officeNumber:e.numOficina,cellNumber:e.celular,coordinador:e.coordinador}));n(a)}catch(e){console.error("Error fetching professors: ",e)}})()},[]);const s=r?t.filter(e=>e.location===r):t;return o.a.createElement(o.a.Fragment,null,o.a.createElement(M,{titulo:"Equipo Guia"}),o.a.createElement(E.a,null,o.a.createElement("title",null,"Equipo Guia - Tecnol\xf3gico de Costa Rica")),o.a.createElement("div",{className:".subtituloH"},o.a.createElement("h1",null,"Equipo Guia de docentes asignados")),o.a.createElement("div",{className:"dropdown-container"},o.a.createElement("select",{onChange:e=>c(e.target.value),className:"location-dropdown"},o.a.createElement("option",{value:""},"Escoge la Sede"),o.a.createElement("option",{value:"Cartago"},"Cartago"),o.a.createElement("option",{value:"San Jose"},"San Jose"),o.a.createElement("option",{value:"Limon"},"Limon"),o.a.createElement("option",{value:"San Carlos"},"San Carlos"),o.a.createElement("option",{value:"Puntarenas"},"Puntarenas"))),o.a.createElement("div",{className:"card-container"},s.map(e=>o.a.createElement(Z,{key:e.email,user:e}))))};t(183),t(184);var le=function(e){let{professor:a,onClose:t,onSave:n}=e;const[r,c]=Object(l.useState)({name:a.name,email:a.email,location:a.location,officeNumber:a.officeNumber,cellNumber:a.cellNumber,coordinador:a.coordinador}),s=e=>{const{name:a,value:t,type:n,checked:l}=e.target;c(e=>({...e,[a]:"checkbox"===n?l:t}))};Object(l.useEffect)(()=>{c({name:a.name,email:a.email,location:a.location,officeNumber:a.officeNumber,cellNumber:a.cellNumber,coordinador:a.coordinador})},[a]);const{user:i}=P(),m=void 0===i.coordinador,d="Cartago"===i.sede;return o.a.createElement("div",{className:"modal"},o.a.createElement("form",{onSubmit:async e=>{e.preventDefault();try{console.log("Saving changes for professor:",a.code,r),await n(a.code,r),t()}catch(l){console.error("Failed to update professor:",l)}}},o.a.createElement("label",null,"Name:"),o.a.createElement("input",{type:"text",name:"name",value:r.name,onChange:s}),o.a.createElement("label",null,"Email:"),o.a.createElement("input",{type:"email",name:"email",value:r.email,onChange:s}),o.a.createElement("label",null,"Office Number:"),o.a.createElement("input",{type:"text",name:"officeNumber",value:r.officeNumber,onChange:s}),o.a.createElement("label",null,"Cell Number:"),o.a.createElement("input",{type:"text",name:"cellNumber",value:r.cellNumber,onChange:s}),m&&d&&o.a.createElement(o.a.Fragment,null,o.a.createElement("label",null,"Coordinador:"),o.a.createElement("input",{type:"checkbox",name:"coordinador",checked:r.coordinador,onChange:s})),o.a.createElement("button",{type:"submit"},"Save Changes"),o.a.createElement("button",{type:"button",onClick:t},"Cancel")))};var oe=()=>{const e=Object(i.q)(),[a,t]=Object(l.useState)([]),[n,r]=Object(l.useState)(null),c=Object(i.o)();Object(l.useEffect)(()=>{s()},[c]);const s=async()=>{try{const e=await X(),a=e.filter(e=>!0===e.estado).map(e=>({name:e.nombre+" "+e.nombre2+" "+e.apellido1+" "+e.apellido2,imageUrl:e.foto,location:e.sede+" ",code:e.codigo,email:e.email,officeNumber:e.numOficina,cellNumber:e.celular,estado:e.estado,coordinador:e.coordinador}));t(a)}catch(e){console.error("Error fetching professors: ",e)}},m=async e=>{await(async e=>{if(!e)throw console.error("Provided 'codigoUnico' is undefined"),new Error("Invalid 'codigoUnico' provided. It must not be undefined.");const a=Object(x.b)(D,"Profesores"),t=Object(x.i)(a,Object(x.m)("codigo","==",e));try{const a=await Object(x.f)(t);if(a.empty)throw console.log("No matching documents found with code:",e),new Error("No matching professor found to delete");a.forEach(async a=>{const t=a.ref;console.log("Deleting professor with code:",a.data()),await Object(x.l)(t,{estado:!1}),console.log("Professor inactive successfully with code:",e)})}catch(n){throw console.error("Error deleting professor: ",n),new Error("Failed to delete professor")}})(e.code),s()};return o.a.createElement(o.a.Fragment,null,o.a.createElement(M,{titulo:"Equipo Gu\xeda",id:!0}),o.a.createElement(E.a,null,o.a.createElement("title",null,"Equipo Gu\xeda - Tecnol\xf3gico de Costa Rica")),o.a.createElement("div",{className:"subtituloH"},o.a.createElement("h1",null,"Docentes Asignados"),o.a.createElement("button",{className:"add-button",onClick:()=>{e("/agregarProfesor")}},"+")),o.a.createElement("div",{className:"card-container"},a.map(e=>o.a.createElement("div",{className:"user-card-wrapper",key:e.email,style:{marginBottom:"20px",border:"1px solid #ccc",padding:"20px",boxShadow:"0 2px 5px rgba(0, 0, 0, 0.1)"}},o.a.createElement(Z,{user:e}),o.a.createElement("div",{className:"pag-buttons"},o.a.createElement("button",{type:"button",onClick:()=>(e=>{console.log("Editing user:",e),r(e)})(e)},"Editar"),o.a.createElement("button",{type:"button",onClick:()=>m(e)},"Baja"))))),n&&o.a.createElement(le,{professor:n,onClose:()=>{r(null)},onSave:async(e,a)=>{await(async(e,a)=>{if(!e)throw console.error("Provided 'codigoUnico' is undefined"),new Error("Invalid 'codigoUnico' provided. It must not be undefined.");const t=Object(x.b)(D,"Profesores"),n=Object(x.i)(t,Object(x.m)("codigo","==",e));try{const t=await Object(x.f)(n);if(t.empty)throw console.log("No matching documents found with code:",e),new Error("No matching professor found to update");t.forEach(async t=>{const n=t.ref;console.log("Updating professor with code:",t.data()),a=Q(a),console.log("New professor data:",a),await Object(x.l)(n,a),console.log("Professor updated successfully with code:",e)})}catch(l){throw console.error("Error updating professor: ",l),new Error("Failed to update professor")}})(e,a),s()}}))};t(185);const re=Object(x.b)(D,"canceledActivities"),ce=Object(x.b)(D,"sentReminders"),se=async(e,a)=>{try{const t="".concat(e,"_").concat(a);await Object(x.k)(Object(x.d)(ce,t),{activityId:e,date:a}),console.log("Recordatorio para la actividad ".concat(e," a\xf1adido para el d\xeda ").concat(a))}catch(t){console.error("Error a\xf1adiendo recordatorio enviado:",t)}},ie=async(e,a)=>{try{const t="".concat(e,"_").concat(a),n=Object(x.d)(ce,t);return(await Object(x.e)(n)).exists()}catch(t){return console.error("Error comprobando recordatorio enviado:",t),!1}};var me=new class{constructor(){this.observers=[]}addObserver(e){this.observers.push(e)}removeObserver(e){this.observers=this.observers.filter(a=>a!==e)}notify(e){this.observers.forEach(a=>a.update(e))}};class de{visit(e,a){throw new Error("Este metodo debe implementarse")}}class ue extends de{async visit(e,a){const t=new Date(e.dateTime);if(t.setDate(t.getDate()-e.daysBeforeAnnounce),a>=t&&"PLANEADA"===e.state){const t=Object(x.d)(D,"activities",e.id);await Object(x.l)(t,{state:"NOTIFICADA"}),e.state="NOTIFICADA";const n={emisor:e.responsibles[0],fecha:a.toDateString(),hora:a.toTimeString(),contenido:"Se ha publicado la actividad ".concat(e.activityName)};me.notify(n)}}}class Ee extends de{async visit(e,a){if("CANCELADA"===e.state){if(await(async e=>{try{const a=Object(x.d)(re,e);return(await Object(x.e)(a)).exists()}catch(a){return console.error("Error getting canceled activity: ",a),!1}})(e.id))console.log("Actividad ".concat(e.id," ya ha sido avisada de su cancelacion"));else{await(async e=>{try{await Object(x.k)(Object(x.d)(re,e),{id:e}),console.log("Actividad ".concat(e," cancelada"))}catch(a){console.error("Error adding canceled activity: ",a)}})(e.id);const t={emisor:e.responsibles[0],fecha:a.toDateString(),hora:a.toTimeString(),contenido:"Se ha cancelado la actividad ".concat(e.activityName)};me.notify(t),console.log("Actividad ".concat(e.id," cancelada"))}}}}class be extends de{async visit(e,a){const t=new Date(e.dateTime),n=[];if(a<t&&"NOTIFICADA"===e.state){const l=Math.floor(e.daysBeforeAnnounce/e.reminderDays),o=new Date(t.getTime()-24*e.daysBeforeAnnounce*60*60*1e3);for(let a=0;a<l;a++){const l=new Date(o.getTime()+a*e.reminderDays*24*60*60*1e3);l<=t&&n.push(l)}for(const r of n)if(a.toDateString()===r.toDateString()){if(await ie(e.id,r))console.log("Recordatorio ya enviado para la actividad ".concat(e.id));else{await se(e.id,r),console.log("Recordatorio generado para la actividad ".concat(e.id));const n=Math.abs(t-a),l=Math.ceil(n/864e5),o={emisor:e.responsibles[0],fecha:a.toDateString(),hora:a.toTimeString(),contenido:"Recordatorio para la actividad ".concat(e.activityName,". Faltan ").concat(l-1," dias")};me.notify(o)}}}}}const pe=async e=>{try{const a=Object(x.d)(Object(x.b)(D,"messageStudent"),e),t=await Object(x.e)(a);if(!t.exists())return console.log("No messages found for this email"),[];return t.data().listamensajes||[]}catch(a){throw console.error("Error getting messages by email: ",a),a}},ge=async()=>{try{const e=Object(x.b)(D,"Estudiantes"),a=await Object(x.f)(Object(x.i)(e)),t=[];return a.forEach(e=>{t.push({email:e.data().email})}),console.log("Estudiantes obtenidos y ordenados exitosamente:",t),t}catch(e){throw console.error("Error al obtener y ordenar los estudiantes:",e),e}};var ve=new class{async update(e){console.log("Se ha realizado la siguiente notificacion ".concat(e));const{emisor:a,fecha:t,hora:n,contenido:l}=e;await(async(e,a,t,n)=>{try{const l=await $("mensajeId"),o={id:l.count,emisor:e,fecha:a,hora:t,contenido:n,estado:"sent"},r=l.count+1;await ee(l.id,{cont:r});const c=await ge();for(const e of c){const a=e.email,t=Object(x.d)(Object(x.b)(D,"messageStudent"),a),n=await Object(x.e)(t);let r=[];n.exists()&&(r=n.data().listamensajes||[]),r=r.filter(e=>l.count!==e.id),r.push(o),await Object(x.k)(t,{correo:a,listamensajes:r}),console.log("MessageStudent updated successfully with new message")}}catch(l){console.error("Error adding document: ",l)}})(a,t,n,l)}};var fe=e=>{let{activity:a}=e;const[t,n]=Object(l.useState)(a),r=new Date,c=Object(i.q)(),s=new ue,m=new be,d=new Ee;return Object(l.useEffect)(()=>{const e=Object(x.d)(D,"activities",a.id),t=Object(x.h)(e,e=>{if(e.exists()){const t={id:a.id,...e.data()};n(t),s.visit(t,r),m.visit(t,r),d.visit(t,r)}else console.log("No such document!")},e=>{console.error("Error fetching document: ",e)});return me.addObserver(ve),()=>{me.removeObserver(ve),t()}},[a.id]),o.a.createElement("div",{className:"activity-card"},o.a.createElement("div",{className:"activity-info"},o.a.createElement("img",{src:t.poster,alt:"activity",className:"activity-image",onClick:()=>{return e=a.id,void c("/verEvidencia/".concat(e));var e}}),o.a.createElement("div",{className:"activity-name"},t.activityName),o.a.createElement("div",{className:"activity-type"},t.activityType)),o.a.createElement("div",{className:"activity-details"},o.a.createElement("div",null,o.a.createElement("strong",null,"Fecha:")," ",new Date(t.dateTime).toLocaleDateString()),o.a.createElement("div",null,o.a.createElement("strong",null,"Hora:")," ",new Date(t.dateTime).toLocaleTimeString()),o.a.createElement("div",null,o.a.createElement("strong",null,"Semana:")," ",t.week),o.a.createElement("div",null,o.a.createElement("strong",null,"Docente responsable:")," ",t.responsibles.join(", ")),o.a.createElement("div",null,o.a.createElement("strong",null,"Dias antes de anunciar:")," ",t.daysBeforeAnnounce),o.a.createElement("div",null,o.a.createElement("strong",null,"Dias recordatorio:")," ",t.reminderDays),o.a.createElement("div",null,o.a.createElement("strong",null,"Modalidad:")," ",t.modality),o.a.createElement("div",null,o.a.createElement("strong",null,"Enlace:")," ","Remota"===t.modality?o.a.createElement("a",{href:t.link,target:"_blank"},"Link"):"N/A"),o.a.createElement("div",null,o.a.createElement("strong",null,"Estado:")," ",t.state)))};t(186);const he=async e=>{try{const a=Object(x.b)(D,"comentarios"),t=await Object(x.f)(Object(x.i)(a,Object(x.m)("actividad","==",e))),n=[];return t.forEach(e=>{n.push({id:e.id,emailUsuario:e.data().emailUsuario,texto:e.data().texto,actividad:e.data().actividad,fecha:e.data().fecha})}),n.sort((e,a)=>e.fecha-a.fecha),console.log("Comentarios obtenidos exitosamente:",n),n}catch(a){throw console.error("Error al obtener los comentarios del usuario:",a),a}};t(187);var ye=function(e){let{activity:a,onClose:t}=e;const[n,r]=Object(l.useState)([]),[c,s]=Object(l.useState)(""),[i,m]=Object(l.useState)(0),[d,u]=Object(l.useState)(!1);return o.a.createElement("div",{className:"modal"},o.a.createElement(b.a,null,o.a.createElement(b.a.Group,{className:"input-control"},o.a.createElement(b.a.Label,null,"Upload Images"),o.a.createElement(p.a,null,o.a.createElement(g.a,{type:"file",multiple:!0,accept:"image/*",onChange:e=>{e.target.files&&e.target.files.length>5?alert("You can only upload up to 5 images."):e.target.files&&e.target.files.length>0&&r(e.target.files)}}))),"Remota"===a.modality&&o.a.createElement(b.a.Group,{className:"input-control"},o.a.createElement(b.a.Label,null,"Recording Link"),o.a.createElement(p.a,null,o.a.createElement(g.a,{type:"text",placeholder:"Enter recording link",value:c,onChange:e=>{s(e.target.value)}}))),o.a.createElement(v.a,{className:"Button",variant:"primary",onClick:async()=>{u(!0);const e=[],l=[];Array.from(n).forEach((t,n)=>{const o=Object(A.c)(L,"evidences/".concat(a.id,"/").concat(t.name)),r=Object(A.e)(o,t);e.push(new Promise((e,a)=>{r.on("state_changed",e=>{const a=e.bytesTransferred/e.totalBytes*100;console.log("Upload is "+a+"% done"),m(a)},e=>{console.error("Error uploading file:",e),a(e),u(!1)},async()=>{const a=await Object(A.a)(r.snapshot.ref);console.log("File available at ".concat(a)),l.push(a),e(a)})}))});try{await Promise.all(e),console.log("All files uploaded"),console.log(a);const n=Object(x.d)(D,"activities",a.id);await Object(x.l)(n,{imageUrls:l,link:c,state:"REALIZADA"}),console.log("Activity updated with image URLs"),t()}catch(o){console.error("Error while uploading:",o),alert("Error al subir im\xe1genes. Por favor, intenta de nuevo.")}finally{u(!1)}},disabled:d},d?"Uploading (".concat(i.toFixed(2),"%)"):"Upload"),o.a.createElement(v.a,{className:"Button",variant:"secondary",onClick:t},"Cancel")))};t(188);var je=function(e){let{activity:a,onClose:t,onSave:n}=e;const[r,c]=Object(l.useState)({activityName:a.activityName,activityType:a.activityType,dateTime:a.dateTime,week:a.week,responsibles:a.responsibles,daysBeforeAnnounce:a.daysBeforeAnnounce,reminderDays:a.reminderDays,modality:a.modality,link:a.link,poster:a.poster,state:a.state,justification:a.justification||""}),s=e=>{const{name:a,value:t}=e.target;c(e=>({...e,[a]:t}))};function i(e){const a=new Date(e),t=a.getFullYear(),n="".concat(a.getMonth()+1).padStart(2,"0"),l="".concat(a.getDate()).padStart(2,"0"),o="".concat(a.getHours()).padStart(2,"0"),r="".concat(a.getMinutes()).padStart(2,"0");return"".concat(t,"-").concat(n,"-").concat(l,"T").concat(o,":").concat(r)}return Object(l.useEffect)(()=>{c({activityName:a.activityName,activityType:a.activityType,dateTime:i(a.dateTime),week:a.week,responsibles:a.responsibles,daysBeforeAnnounce:a.daysBeforeAnnounce,reminderDays:a.reminderDays,modality:a.modality,link:a.link,poster:a.poster,state:a.state,justification:a.justification||""})},[a]),o.a.createElement("div",{className:"modal"},o.a.createElement("div",{className:"modal-content"},o.a.createElement(b.a,{id:"form",onSubmit:async e=>{e.preventDefault();try{console.log("Saving changes for activity:",a.id,r),await n(a.id,r),t()}catch(l){console.error("Failed to update activity:",l)}}},o.a.createElement(b.a.Group,{className:"input-control"},o.a.createElement(b.a.Label,null,"Nombre de la actividad"),o.a.createElement(p.a,null,o.a.createElement(g.a,{type:"text",name:"activityName",placeholder:"Enter the name of the activity",value:r.activityName,onChange:s}))),o.a.createElement(b.a.Group,{className:"input-control"},o.a.createElement(b.a.Label,null,"Tipo de actividad"),o.a.createElement(p.a,null,o.a.createElement(g.a,{as:"select",name:"activityType",value:r.activityType,onChange:s},o.a.createElement("option",{value:""},"Selecciona un tipo de actividad"),o.a.createElement("option",{value:"Orientadora"},"Orientadora"),o.a.createElement("option",{value:"Motivacional"},"Motivacional"),o.a.createElement("option",{value:"Apoyo a la vida estudiantil"},"Apoyo a la vida estudiantil"),o.a.createElement("option",{value:"Orden tecnico"},"Orden tecnico"),o.a.createElement("option",{value:"Recreacion"},"Recreacion")))),o.a.createElement(b.a.Group,{className:"input-control"},o.a.createElement(b.a.Label,null,"Fecha y hora"),o.a.createElement(p.a,null,o.a.createElement(g.a,{type:"datetime-local",name:"dateTime",value:r.dateTime,onChange:s}))),o.a.createElement(b.a.Group,{className:"input-control"},o.a.createElement(b.a.Label,null,"Semana"),o.a.createElement(p.a,null,o.a.createElement(g.a,{type:"number",name:"week",min:"1",max:"16",placeholder:"Semana del semestre",value:r.week,onChange:s})),o.a.createElement(b.a.Text,{className:"text-muted"},"Semana del semestre en la que se realizar\xe1 la actividad.")),o.a.createElement(b.a.Group,{className:"input-control"},o.a.createElement(b.a.Label,null,"Responsables"),o.a.createElement(p.a,null,o.a.createElement(g.a,{type:"text",name:"responsibles",placeholder:"Responsables",value:r.responsibles,onChange:s})),o.a.createElement(b.a.Text,{className:"text-muted"},"Ingrese los nombres de los responsables separados por comas.")),o.a.createElement(b.a.Group,{className:"input-control"},o.a.createElement(b.a.Label,null,"D\xedas antes de anunciar"),o.a.createElement(p.a,null,o.a.createElement(g.a,{type:"number",name:"daysBeforeAnnounce",placeholder:"D\xedas antes de anunciar",value:r.daysBeforeAnnounce,onChange:s}))),o.a.createElement(b.a.Group,{className:"input-control"},o.a.createElement(b.a.Label,null,"D\xedas de recordatorio"),o.a.createElement(p.a,null,o.a.createElement(g.a,{type:"number",name:"reminderDays",placeholder:"D\xedas de recordatorio",value:r.reminderDays,onChange:s}))),o.a.createElement(b.a.Group,{className:"input-control"},o.a.createElement(b.a.Label,null,"Modalidad"),o.a.createElement(p.a,null,o.a.createElement(g.a,{as:"select",name:"modality",value:r.modality,onChange:s},o.a.createElement("option",{value:""},"Seleccione una modalidad"),o.a.createElement("option",{value:"Presencial"},"Presencial"),o.a.createElement("option",{value:"Remota"},"Remoto")))),o.a.createElement(b.a.Group,{className:"input-control"},o.a.createElement(b.a.Label,null,"Link"),o.a.createElement(p.a,null,o.a.createElement(g.a,{type:"text",name:"link",placeholder:"Enter link if remote",value:r.link,disabled:"Remota"!==r.modality,readOnly:"Remota"!==r.modality,onChange:s}))),o.a.createElement(b.a.Group,{className:"input-control"},o.a.createElement(b.a.Label,null,"Estado"),o.a.createElement(p.a,null,o.a.createElement(g.a,{as:"select",name:"state",value:r.state,onChange:s},o.a.createElement("option",{value:""},"Seleccione un estado"),o.a.createElement("option",{value:"Planeada"},"Planeada"),o.a.createElement("option",{value:"Cancelada"},"Cancelada")))),o.a.createElement(b.a.Group,{className:"input-control"},o.a.createElement(b.a.Label,null,"Justificaci\xf3n por cambio"),o.a.createElement(p.a,null,o.a.createElement(g.a,{as:"textarea",name:"justification",placeholder:"Justifcacion",value:r.justification,onChange:s})),o.a.createElement(b.a.Text,{className:"text-muted"},"Por favor brinde una justificaci\xf3n si el estado de la actividad cambia.")),o.a.createElement(v.a,{className:"Button",variant:"primary",type:"submit"},"Guardar cambios"),o.a.createElement(v.a,{className:"Button",variant:"secondary",type:"button",onClick:t},"Cancelar"))))};var Oe=()=>{const{user:e}=P(),[a,t]=Object(l.useState)(!1),[n,r]=Object(l.useState)([]),[c,s]=Object(l.useState)(0),m=Object(i.q)(),[d,u]=Object(l.useState)(null),[b,p]=Object(l.useState)(null),[g,v]=Object(l.useState)(!1),[f,h]=Object(l.useState)(!1);Object(l.useEffect)(()=>{y()},[]);const y=async()=>{try{const e=(await Object(x.f)(Object(x.b)(D,"activities"))).docs.map(e=>({id:e.id,...e.data()}));r(e),console.log(e)}catch(e){console.error("Error fetching activities:",e)}},[j,O]=Object(l.useState)(""),[N,w]=Object(l.useState)([]);return o.a.createElement(o.a.Fragment,null,o.a.createElement(M,{titulo:"Plan de Trabajo",id:"navBar"}),o.a.createElement(E.a,null,o.a.createElement("title",null,"Plan de Trabajo - Tecnol\xf3gico de Costa Rica")),o.a.createElement("div",{className:"subtituloH"},o.a.createElement("h1",null,"Lista de trabajos existentes"),e.coordinador&&o.a.createElement("button",{className:"add-button",onClick:()=>{m("/agregarActividad")}},"+")),o.a.createElement("div",{className:"PlanTrabajoGuia"},n.map((a,l)=>o.a.createElement("div",{key:l,className:"activity-full-container"},o.a.createElement(fe,{activity:a}),o.a.createElement("div",{className:"activity-buttons"},e.coordinador&&o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{type:"button",onClick:()=>(e=>{console.log("Editing activity:",e),u(e),v(!0)})(a)},"Registrar Evidencia"),o.a.createElement("button",{type:"button",onClick:()=>(e=>{console.log("Editing activity:",e),p(e),h(!0)})(a)},"Editar Actividad")),o.a.createElement("button",{type:"button",onClick:()=>{(e=>{console.log(n[e].id),he(n[e].id).then(e=>{w(e),t(!0)}).catch(e=>{t(!0),console.error("No hay comentarios")})})(l),s(l)}},"Comentarios"))))),a&&o.a.createElement("div",{className:"modal"},o.a.createElement("div",{className:"modal-content"},o.a.createElement("span",{className:"close",onClick:()=>{t(!1)}},"\xd7"),o.a.createElement("h2",null,"Comentarios"),o.a.createElement("div",{className:"comentarios-lista"},N.map((e,a)=>o.a.createElement("div",{key:a,className:"comentario"},o.a.createElement("p",null,"Usuario: ",o.a.createElement("span",{className:"email-highlight"},e.emailUsuario)),o.a.createElement("p",null,"Comentario: ",(e=>{const a=/@[\w.-]+/g,t=e.match(a);return t?e.split(a).map((e,a)=>o.a.createElement(o.a.Fragment,{key:a},e,a<t.length&&o.a.createElement("span",{className:"email-highlight"},t[a]))):e})(e.texto)),o.a.createElement("button",{className:"responder",onClick:()=>{return a=e.emailUsuario,O("@".concat(a," ")),void t(!0);var a}},"Responder")))),o.a.createElement("div",{className:"comentario-nuevo"},o.a.createElement("textarea",{value:j,onChange:e=>{O(e.target.value)},placeholder:"Escribe tu comentario aqu\xed..."}),o.a.createElement("button",{onClick:async()=>{try{const a=e.email;await(async(e,a,t)=>{try{const n=Object(x.b)(D,"comentarios"),l=await Object(x.a)(n,{emailUsuario:e,texto:a,actividad:t,fecha:Object(x.j)()});return console.log("Comentario guardado exitosamente:",l),l.id}catch(n){throw console.error("Error al guardar el comentario:",n),n}})(a,j,n[c].id),O(""),console.log(n[c].id),he(n[c].id).then(e=>{w(e),t(!0)}).catch(e=>{t(!0),console.error("No hay comentarios")})}catch(a){console.error("Error al publicar comentario:",a)}}},"Publicar")))),g&&o.a.createElement(ye,{activity:d,onClose:()=>{v(!1)}}),f&&o.a.createElement(je,{activity:b,onClose:()=>h(!1),onSave:async(e,a)=>{const t=Object(x.d)(D,"activities",e);try{await Object(x.l)(t,a),console.log("Activity updated successfully!"),h(!1)}catch(n){console.error("Error updating activity:",n),alert("Failed to update activity.")}y()}}),o.a.createElement("div",{className:"page-buttons"},o.a.createElement("button",{type:"button",onClick:()=>{window.history.back()}},"Regresar")))},Ne=(t(189),t(22));var we=()=>{const{user:e}=P(),[a,t]=Object(l.useState)([[]]),[n,r]=Object(l.useState)("Cambiar Excel"),[c,s]=Object(l.useState)(!0),[i,m]=Object(l.useState)(!1),[d,u]=Object(l.useState)({}),b=Object(l.useRef)(null),p=Object(l.useRef)(null),g=Object(l.useRef)(null),[v,f]=Object(l.useState)(!1),[h,y]=Object(l.useState)(!1);Object(l.useEffect)(()=>{(async e=>{try{const a=Object(x.b)(D,"archivos"),t=await Object(x.f)(Object(x.i)(a,Object(x.m)("sede","==",e)));let n=null;if(t.forEach(e=>{n={archivoRef:e.data().archivoRef,sede:e.data().sede}}),!n)throw new Error("No se encontraron archivos para la sede especificada.");const l=Object(A.b)(),o=Object(A.c)(l,n.archivoRef),r=await Object(A.a)(o),c=await fetch(r),s=await c.blob(),i=new File([s],n.archivoRef);return console.log("Archivo descargado exitosamente:",i),i}catch(a){console.error("Error al cargar los archivos:",a)}})(e.sede).then(e=>{console.log(e),j(e)}).catch(e=>{console.error("Error al cargar los archivos:",e),m(!0),u({tipo:"error",mensaje:"No se pudo cargar los archivos"})})},[e.sede]);const j=e=>{const a=new FileReader;a.onload=function(e){const a=new Uint8Array(e.target.result),n=Ne.a(a,{type:"array"}),l=n.SheetNames[0],o=n.Sheets[l],r=Ne.b.sheet_to_json(o,{header:1});t(r)},a.readAsArrayBuffer(e)},O=()=>{s(!c),v?(b.current.disabled=!0,p.current.disabled=!0,g.current.disabled=!0,r("Cambiar Excel")):(b.current.disabled=!1,p.current.disabled=!1,g.current.disabled=!1,r("Cancelar")),f(!v)};return o.a.createElement(o.a.Fragment,null,o.a.createElement(M,{titulo:"Lista De Estudiantes"}),o.a.createElement(E.a,null,o.a.createElement("title",null,"Lista De Estudiantes - Tecnol\xf3gico de Costa Rica")),o.a.createElement("div",{className:"subtituloH"},o.a.createElement("h1",null,"Lista de Estudiantes de la sede del TEC")),o.a.createElement("label",{className:"file-label",ref:g,htmlFor:"excelFileInput",disabled:!0},"Subir archivo"),o.a.createElement("input",{className:"file",type:"file",id:"excelFileInput",ref:p,accept:".xlsx, .xls",onChange:e=>{const a=e.target.files[0];j(a)},disabled:!0}),o.a.createElement("div",{className:"excelDataContainer"},o.a.createElement("div",{className:"tableWrapper"},o.a.createElement("table",{className:"excelTable"},o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("td",{className:"indexCell"})," ",a.length>0&&a[0].map((e,a)=>o.a.createElement("td",{key:a,className:"indexCell"},(()=>{const e=[];for(let a=65;a<=90;a++)e.push(String.fromCharCode(a));return e})()[a]))),[...Array(a.length).keys()].map(e=>o.a.createElement("tr",{key:e},o.a.createElement("td",{className:"indexCell"},e+1)," ",a[e].map((e,a)=>o.a.createElement("td",{key:a},e)))))))),o.a.createElement("button",{ref:b,className:"excel-button",onClick:async()=>{try{const a=document.getElementById("excelFileInput");if(0===a.files.length)return void console.log("No se ha seleccionado ning\xfan archivo.");const t=a.files[0];console.log(e.sede);const n=new FileReader;n.onload=async a=>{const t=new Uint8Array(a.target.result),n=Ne.a(t,{type:"array"}),l=n.Sheets[n.SheetNames[0]],o=Ne.b.sheet_to_json(l,{header:1}),r=[[],[],[],[],[],[]];o.forEach(e=>{for(let a=0;a<r.length;a++)void 0!==e[a]&&r[a].push(e[a])}),console.log(r),await(async(e,a)=>{try{for(let t=0;t<e[0].length;t++){const n=e[0][t],l=e[1][t],o=e[2][t],r=e[3][t],c=e[4][t],s=e[5][t],i=(await Object(k.a)(T,r,s).then(e=>e)).user,m=Object(x.d)(D,"Estudiantes/".concat(i.uid));Object(x.k)(m,{nombre:n,apellido1:l,apellido2:o,email:r,password:s,celular:c,sede:a,foto:""}),console.log("Documento agregado con ID: ",m)}return!0}catch(t){throw console.error("Error al subir el archivo:",t),t}})(r,e.sede),y(!0),O()},n.readAsArrayBuffer(t)}catch(a){console.error("Error en subir archivo:",a),m(!0),u({tipo:"error",mensaje:"No se pudo iniciar sesi\xf3n"})}},disabled:c},"Guardar Excel"),o.a.createElement("button",{className:"excel-button2",onClick:O},n),h&&o.a.createElement("div",{className:"modal"},o.a.createElement("div",{className:"modal-content"},o.a.createElement("span",{className:"close",onClick:()=>y(!1)},"\xd7"),o.a.createElement("div",{className:"alert alert-success",role:"alert"},"El archivo se ha cargado correctamente."))))},Ce=(t(190),t(322));var Se=()=>{const e=Object(i.q)(),[a,t]=Object(l.useState)(""),[n,r]=Object(l.useState)(""),[c,s]=Object(l.useState)(""),[m,d]=Object(l.useState)(""),[u,f]=Object(l.useState)(""),[h,y]=Object(l.useState)(""),[j,O]=Object(l.useState)(0),[N,w]=Object(l.useState)(0),[S,k]=Object(l.useState)(""),[T,F]=Object(l.useState)(""),[P,R]=Object(l.useState)(null),[G,I]=Object(l.useState)(""),[B,U]=Object(l.useState)(""),[_,z]=Object(l.useState)(!1),[q,H]=Object(l.useState)({});return o.a.createElement(o.a.Fragment,null,o.a.createElement(E.a,null,o.a.createElement("title",null,"Agregar Actividad - Tecnol\xf3gico de Costa Rica")),o.a.createElement("div",null,o.a.createElement(M,{titulo:"Agregar Actividad"}),o.a.createElement("div",{className:"Container"},o.a.createElement(b.a,{id:"form",onSubmit:async t=>{if(t.preventDefault(),z(!1),H(""),console.log(h),""===u||""===m||""===a||""===n||""===c||""===h||""===j||""===N||""===S||null===P)return z(!0),void H({tipo:"error",mensaje:"Todos los campos son obligatorios"});try{const t=Object(A.c)(L,"posters/".concat(G));await Object(A.d)(t,P);const l=await Object(A.a)(t),o=new Date("".concat(a,"T").concat(n,":00")).toISOString(),r=h.split(",").map(e=>e.trim()),s=Object(x.d)(D,"activities/".concat(u));Object(x.k)(s,{activityName:u,activityType:m,dateTime:o,week:c,responsibles:r,daysBeforeAnnounce:j,reminderDays:N,modality:S,link:T,poster:l,state:"PLANEADA",justification:""}),z(!0),H({tipo:"exito",mensaje:"Actividad agregada correctamente"}),e("/planTrabajoGuia")}catch(l){console.error("Error adding activity:",l),z(!0),H({tipo:"error",mensaje:"Ocurri\xf3 un error al agregar la actividad"})}}},o.a.createElement(b.a.Group,{className:"input-control"},o.a.createElement(b.a.Label,null,"Nombre de la actividad"),o.a.createElement(p.a,null,o.a.createElement(g.a,{type:"text",placeholder:"Nombre de la actividad",value:u,onChange:e=>f(e.target.value)}))),o.a.createElement(b.a.Group,{className:"input-control"},o.a.createElement(b.a.Label,null,"Tipo de actividad"),o.a.createElement(p.a,null,o.a.createElement(b.a.Select,{"aria-label":"Tipo de actividad",value:m,onChange:e=>d(e.target.value)},o.a.createElement("option",{value:""},"Seleccione un tipo de actividad"),o.a.createElement("option",{value:"Orientadora"},"Orientadora"),o.a.createElement("option",{value:"Motivacional"},"Motivacional"),o.a.createElement("option",{value:"Apoyo a la vida estudiantil"},"Apoyo a la vida estudiantil"),o.a.createElement("option",{value:"Orden tecnico"},"Orden tecnico"),o.a.createElement("option",{value:"Recreacion"},"Recreacion")))),o.a.createElement(b.a.Group,{className:"input-control"},o.a.createElement(b.a.Label,null,"Fecha programada"),o.a.createElement(p.a,null,o.a.createElement(g.a,{type:"date",placeholder:"Fecha programada",value:a,onChange:e=>{const a=e.target.value;t(a)}}))),o.a.createElement(b.a.Group,{className:"input-control"},o.a.createElement(b.a.Label,null,"Hora programada"),o.a.createElement(p.a,null,o.a.createElement(g.a,{type:"time",placeholder:"Hora programada",value:n,onChange:e=>r(e.target.value)}))),o.a.createElement(b.a.Group,{className:"input-control"},o.a.createElement(b.a.Label,null,"Semana"),o.a.createElement(p.a,null,o.a.createElement(g.a,{type:"number",placeholder:"Semana",value:c,onChange:e=>s(e.target.value),min:"1",max:"16"})),o.a.createElement(b.a.Text,{className:"text-muted"},"Semana del semestre en la que se realizar\xe1 la actividad.")),o.a.createElement(b.a.Group,{className:"input-control"},o.a.createElement(b.a.Label,null,"Responsables"),o.a.createElement(p.a,null,o.a.createElement(g.a,{type:"text",placeholder:"Responsables",value:h,onChange:e=>y(e.target.value)})),o.a.createElement(b.a.Text,{className:"text-muted"},"Ingrese los nombres de los responsables separados por comas.")),o.a.createElement(b.a.Group,{className:"input-control"},o.a.createElement(b.a.Label,null,"D\xedas antes de anunciar"),o.a.createElement(p.a,null,o.a.createElement(g.a,{type:"number",placeholder:"D\xedas antes de anunciar",value:j,onChange:e=>O(e.target.value)}))),o.a.createElement(b.a.Group,{className:"input-control"},o.a.createElement(b.a.Label,null,"D\xedas de recordatorio"),o.a.createElement(p.a,null,o.a.createElement(g.a,{type:"number",placeholder:"D\xedas de recordatorio",value:N,onChange:e=>w(e.target.value)}))),o.a.createElement(b.a.Group,{className:"input-control"},o.a.createElement(b.a.Label,null,"Modalidad"),o.a.createElement(p.a,null,o.a.createElement(b.a.Select,{"aria-label":"Modalidad",value:S,onChange:e=>{k(e.target.value),"Remota"!==S?F("No aplica"):"Remota"===S&&F("")}},o.a.createElement("option",{value:""},"Seleccione una modalidad"),o.a.createElement("option",{value:"Presencial"},"Presencial"),o.a.createElement("option",{value:"Remota"},"Remota")))),o.a.createElement(b.a.Group,{className:"input-control"},o.a.createElement(b.a.Label,null,"Link"),o.a.createElement(p.a,null,o.a.createElement(g.a,{type:"text",placeholder:"Link",value:T,disabled:"Remota"!==S,readOnly:"Remota"!==S,onChange:e=>F(e.target.value)}))),o.a.createElement(b.a.Group,{className:"input-control"},o.a.createElement(b.a.Label,null,"Cartel"),o.a.createElement(p.a,null,o.a.createElement(b.a.Control,{type:"file",accept:"image/*",onChange:e=>{const a=e.target.files[0];if(a){const e="".concat(Object(Ce.a)(),"-").concat(a.name);R(a),I(e)}}}))),o.a.createElement(v.a,{className:"Button",variant:"primary",type:"submit"},"Agregar"),o.a.createElement(v.a,{className:"Button",variant:"secondary",type:"button",onClick:()=>{e("/planTrabajoGuia")}},"Regresar")))),o.a.createElement(C,{tipo:q.tipo,mensaje:q.mensaje,estadoAlerta:_,setestadoAlerta:z}))};var xe=()=>{const{user:e}=P(),a=Object(i.q)(),[t,n]=Object(l.useState)(""),[r,c]=Object(l.useState)(""),[s,m]=Object(l.useState)(""),[d,u]=Object(l.useState)(""),[f,h]=Object(l.useState)(e.sede),[y,j]=Object(l.useState)(""),[O,N]=Object(l.useState)(""),[w,C]=Object(l.useState)(""),[S,x]=Object(l.useState)(!1),[k,D]=Object(l.useState)(null),[T,F]=Object(l.useState)(""),R=void 0===e.coordinador,G="Cartago"===e.sede;return o.a.createElement(o.a.Fragment,null,o.a.createElement(E.a,null,o.a.createElement("title",null,"Agregar Profesor - Tecnol\xf3gico de Costa Rica")),o.a.createElement("div",null,o.a.createElement(M,{titulo:"Agregar Profesor"}),o.a.createElement("div",{className:"Container"},o.a.createElement(b.a,{id:"form",onSubmit:async e=>{if(e.preventDefault(),""!==t&&""!==s&&""!==f&&""!==y&&""!==O&&""!==w)try{const e=Object(A.c)(L,"Profesores/".concat(t,"-").concat(k.name)),n=Object(A.e)(e,k);n.on("state_changed",e=>{const a=e.bytesTransferred/e.totalBytes*100;console.log("Upload is "+a+"% done")},e=>{throw e},async()=>{const e=await Object(A.a)(n.snapshot.ref);console.log("File available at",e),await V(t,e,f,y,O,w,r,s,d,S,!0,T),a("/edicionGuia")})}catch(n){console.error("Error during the image upload: ",n),alert("Error al subir la imagen. Por favor, intenta de nuevo.")}else alert("Por favor, llena todos los campos")}},o.a.createElement(b.a.Group,{className:"input-control"},o.a.createElement(b.a.Label,null,"Subir Imagen"),o.a.createElement(p.a,null,o.a.createElement(g.a,{type:"file",onChange:e=>{D(e.target.files[0])},accept:"image/*"}))),o.a.createElement(b.a.Group,{className:"input-control"},o.a.createElement(b.a.Label,null,"Nombre"),o.a.createElement(p.a,null,o.a.createElement(g.a,{type:"text",placeholder:"Nombre",value:t,onChange:e=>n(e.target.value)}))),o.a.createElement(b.a.Group,{className:"input-control"},o.a.createElement(b.a.Label,null,"Segundo Nombre"),o.a.createElement(p.a,null,o.a.createElement(g.a,{type:"text",placeholder:"Segundo Nombre",value:r,onChange:e=>c(e.target.value)}))),o.a.createElement(b.a.Group,{className:"input-control"},o.a.createElement(b.a.Label,null,"Apellido"),o.a.createElement(p.a,null,o.a.createElement(g.a,{type:"text",placeholder:"Apellido",value:s,onChange:e=>m(e.target.value)}))),o.a.createElement(b.a.Group,{className:"input-control"},o.a.createElement(b.a.Label,null,"Segundo Apellido"),o.a.createElement(p.a,null,o.a.createElement(g.a,{type:"text",placeholder:"Segundo Apellido",value:d,onChange:e=>u(e.target.value)}))),o.a.createElement(b.a.Group,{className:"input-control"},o.a.createElement(b.a.Label,null,"Email"),o.a.createElement(p.a,null,o.a.createElement(g.a,{type:"email",placeholder:"Email",value:y,onChange:e=>j(e.target.value)}))),o.a.createElement(b.a.Group,{className:"input-control"},o.a.createElement(b.a.Label,{htmlFor:"password"},"Password"),o.a.createElement(p.a,null,o.a.createElement(g.a,{type:"password",value:T,placeholder:"Password",onChange:e=>F(e.target.value)}))),o.a.createElement(b.a.Group,{className:"input-control"},o.a.createElement(b.a.Label,null,"N\xfamero de oficina"),o.a.createElement(p.a,null,o.a.createElement(g.a,{type:"text",placeholder:"N\xfamero de oficina",value:O,onChange:e=>N(e.target.value)}))),o.a.createElement(b.a.Group,{className:"input-control"},o.a.createElement(b.a.Label,null,"Celular"),o.a.createElement(p.a,null,o.a.createElement(g.a,{type:"text",placeholder:"Celular",value:w,onChange:e=>C(e.target.value)}))),R&&G&&o.a.createElement(o.a.Fragment,null,o.a.createElement(b.a.Group,{className:"input-control"},o.a.createElement(b.a.Label,null),o.a.createElement(p.a,null,o.a.createElement(b.a.Check,{type:"checkbox",label:"Coordinador",value:S,onChange:e=>x(e.target.checked)})))),o.a.createElement(v.a,{className:"Button",variant:"primary",type:"submit"},"Agregar")))))};t(191);var ke=()=>{const{user:e}=P(),[a,t]=Object(l.useState)("estudiantes"),[n,r]=Object(l.useState)([[]]),[c,s]=Object(l.useState)(null),[i,m]=Object(l.useState)([]),[d,u]=Object(l.useState)(null),[b,p]=Object(l.useState)(!1),[g,v]=Object(l.useState)({}),[f,h]=Object(l.useState)([]),[y,j]=Object(l.useState)([]);Object(l.useEffect)(()=>{"estudiantes"===a&&N()},[e.sede]);const O=()=>{(async()=>{try{const e=Object(x.b)(D,"Estudiantes"),a=await Object(x.f)(Object(x.i)(e)),t=[];return a.forEach(e=>{t.push({nombre:e.data().nombre,apellido1:e.data().apellido1,apellido2:e.data().apellido2,email:e.data().email,celular:e.data().celular,sede:e.data().sede})}),t.sort((e,a)=>e.sede<a.sede?-1:e.sede>a.sede?1:0),console.log("Estudiantes obtenidos y ordenados exitosamente:",t),t}catch(e){throw console.error("Error al obtener y ordenar los estudiantes:",e),e}})().then(e=>{h(e);const a=e.map(e=>e.sede),t=[...new Set(a)];m(t),u(t[0]),j(e);const n=e.filter(e=>e.sede===t[0]);w(n)}).catch(e=>{console.error("Error al cargar los archivos:",e),p(!0),v({tipo:"error",mensaje:"No se pudo cargar los archivos"})})},N=()=>{(async e=>{try{const a=Object(x.b)(D,"Estudiantes"),t=await Object(x.f)(Object(x.i)(a,Object(x.m)("sede","==",e))),n=[];return t.forEach(e=>{n.push({nombre:e.data().nombre,apellido1:e.data().apellido1,apellido2:e.data().apellido2,email:e.data().email,celular:e.data().celular,sede:e.data().sede})}),n.sort((e,a)=>e.sede<a.sede?-1:e.sede>a.sede?1:0),console.log("Estudiantes obtenidos y ordenados exitosamente:",n),n}catch(a){throw console.error("Error al obtener y ordenar los estudiantes:",a),a}})(e.sede).then(e=>{w(e)}).catch(e=>{console.error("Error al cargar los archivos:",e),p(!0),v({tipo:"error",mensaje:"No se pudo cargar los archivos"})})},w=e=>{const a=Ne.b.json_to_sheet(e),t=Ne.b.sheet_to_json(a,{header:1});r(t);const n=Ne.b.book_new();Ne.b.book_append_sheet(n,a,"Estudiantes"),s(n)},C=e=>{t(e)};return o.a.createElement(o.a.Fragment,null,o.a.createElement(M,{titulo:"Lista De Estudiantes"}),o.a.createElement(E.a,null,o.a.createElement("title",null,"Lista De Estudiantes - Tecnol\xf3gico de Costa Rica")),o.a.createElement("div",{className:"tabs"},o.a.createElement("button",{className:"estudiantes"===a?"active":"",onClick:()=>{C("estudiantes"),N()}},"Mi Sede"),o.a.createElement("button",{className:"profesores"===a?"active":"",onClick:()=>{C("profesores"),O()}},"Todas las Sedes")),o.a.createElement("div",{className:"subtituloH"},o.a.createElement("h1",null,"Lista de Estudiantes de la sede del TEC")),o.a.createElement("div",{className:"excelDataContainer"},o.a.createElement("div",{className:"tableWrapper"},o.a.createElement("table",{className:"excelTable"},o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("td",{className:"indexCell"}),n.length>0&&n[0].map((e,a)=>o.a.createElement("td",{key:a,className:"indexCell"},(()=>{const e=[];for(let a=65;a<=90;a++)e.push(String.fromCharCode(a));return e})()[a]))),n.map((e,a)=>o.a.createElement("tr",{key:a},o.a.createElement("td",{className:"indexCell"},a+1),e.map((e,a)=>o.a.createElement("td",{key:a},e)))))))),"estudiantes"===a&&o.a.createElement("div",{className:"excelDataContainer"},o.a.createElement("div",{className:"tableWrapper"})),"profesores"===a&&o.a.createElement("div",{className:"excelDataContainer"},o.a.createElement("div",{className:"menuContainer"},o.a.createElement("div",{className:"menu"},i.map((e,a)=>o.a.createElement("button",{key:a,className:"menuButton ".concat(e===d?"active":""),onClick:()=>(e=>{u(e);const a=f.filter(a=>a.sede===e);w(a)})(e)},e)))),o.a.createElement("div",{className:"tableWrapper"}),o.a.createElement("button",{className:"excel-button2",onClick:()=>{let e=Ne.b.book_new(),a={};y.forEach(e=>{const{sede:t}=e;a[t]||(a[t]=[]),a[t].push(e)}),Object.keys(a).forEach(t=>{const n=a[t],l=Ne.b.json_to_sheet(n);Ne.b.book_append_sheet(e,l,t)}),Ne.c(e,"estudiantes_por_sede.xlsx")}},"Descargar Todo")),o.a.createElement("button",{className:"excel-button",onClick:()=>{c&&Ne.c(c,"EstudiantesSede.xlsx")}},"Descargar Sede"))};t(192);var Ae=()=>{const{activityId:e}=Object(i.s)(),[a,t]=o.a.useState(null);return o.a.useEffect(()=>{(async()=>{const a=Object(x.d)(D,"activities",e),n=await Object(x.e)(a);n.exists()?t(n.data()):console.log("No such document!")})()},[e]),a?o.a.createElement("div",null,o.a.createElement("h1",null,"Evidencias de la Actividad"),o.a.createElement("div",{className:"container-evidencias"},a.imageUrls&&a.imageUrls.length>0?a.imageUrls.map((e,a)=>o.a.createElement("div",{key:a,className:"evidencia"},o.a.createElement("img",{src:e,alt:"Evidencia ".concat(a+1)}))):o.a.createElement("p",null,"Actividad no finalizada")),o.a.createElement("div",{className:"container-link"},a.link?o.a.createElement("h1",null,o.a.createElement("a",{href:a.link,target:"_blank",rel:"noreferrer"},"Grabaci\xf3n")):o.a.createElement("h1",null,"No hay link"))):o.a.createElement("div",null,"Loading...")};t(193);var De=e=>{let{message:a}=e;const[t,n]=Object(l.useState)(!1);return o.a.createElement("div",{className:"message ".concat(t?"open":"closed"),onClick:async()=>{if("visto"!=a.state)try{await(async(e,a)=>{try{const t=Object(x.d)(Object(x.b)(D,"messageStudent"),e),n=await Object(x.e)(t);if(!n.exists())return void console.log("No messages found for this email");let l=n.data().listamensajes||[];l=l.map(e=>e.id===a?{...e,estado:"visto"}:e),await Object(x.k)(t,{...n.data(),listamensajes:l}),console.log("Message updated successfully")}catch(t){console.error("Error updating document: ",t)}})(a.email,a.id),a.state="visto"}catch(e){console.error("Error updating document:",e)}n(!t)}},o.a.createElement("div",{className:"message-header"},o.a.createElement("span",null,a.sender),o.a.createElement("span",{className:"toggle-icon"},"visto"===a.state?"\ud83d\udc41\ufe0f\u200d\ud83d\udde8\ufe0f":"\ud83d\udc41")),t&&o.a.createElement("div",{className:"message-body"},o.a.createElement("p",null,a.text),o.a.createElement("p",null,a.date)))};t(194);var Te=()=>{const{user:e}=P(),[a,t]=Object(l.useState)([]),[n,r]=Object(l.useState)("todo");Object(l.useEffect)(()=>{(async()=>{try{const a=await pe(e.email);t(a)}catch(a){console.error("Error getting messages:",a)}})()},[n,e.email]);const c=a.filter(e=>"todo"===n||("leido"===n?"visto"===e.estado:"noLeido"!==n||"sent"===e.estado)).sort((e,a)=>{const t=new Date("".concat(e.fecha," ").concat(e.hora));return new Date("".concat(a.fecha," ").concat(a.hora))-t});return o.a.createElement(o.a.Fragment,null,o.a.createElement(E.a,null,o.a.createElement("title",null,"BuzonEntrada")),o.a.createElement("div",null,o.a.createElement(M,{titulo:"BuzonEntrada"}),o.a.createElement("div",{className:"filter-container"},o.a.createElement("label",{htmlFor:"filter"},"Filtrar por estado: "),o.a.createElement("select",{id:"filter",value:n,onChange:e=>{r(e.target.value)}},o.a.createElement("option",{value:"todo"},"Todo"),o.a.createElement("option",{value:"leido"},"Le\xeddo"),o.a.createElement("option",{value:"noLeido"},"No le\xeddo"))),o.a.createElement("button",{onClick:async()=>{try{await(async e=>{try{const a=Object(x.b)(D,"messageStudent"),t=Object(x.i)(a,Object(x.m)("correo","==",e));(await Object(x.f)(t)).forEach(async a=>{const t=a.data(),{listamensajes:n}=t,l=n.filter(e=>"visto"===e.estado);for(const e of l)await Object(x.c)(a.ref);const o=n.filter(e=>"visto"!==e.estado);await Object(x.k)(a.ref,{correo:e,listamensajes:o})}),console.log("Read messages deleted successfully")}catch(a){console.error("Error deleting read messages: ",a)}})(e.email);const a=await pe(e.email);t(a)}catch(a){console.error("Error deleting read messages:",a)}}},"Eliminar todos los mensajes vistos"),o.a.createElement("div",{className:"buzon-container"},c.map(a=>o.a.createElement(De,{key:a.id,message:{email:e.email,id:a.id,state:a.estado,sender:a.emisor,text:a.contenido,date:"".concat(a.fecha," - ").concat(a.hora)}})))))};t(195);var Le=()=>{const[e,a]=Object(l.useState)([]),[t,n]=Object(l.useState)([]),[r,c]=Object(l.useState)(!1);Object(i.q)();Object(l.useEffect)(()=>{s()},[]);const s=async()=>{try{const e=(await Object(x.f)(Object(x.b)(D,"activities"))).docs.map(e=>({id:e.id,...e.data()}));a(e),n(e)}catch(e){console.error("Error fetching activities:",e)}};return o.a.createElement(o.a.Fragment,null,o.a.createElement(M,{titulo:"Plan de Trabajo",id:"navBar"}),o.a.createElement(E.a,null,o.a.createElement("title",null,"Plan de Trabajo - Tecnol\xf3gico de Costa Rica")),o.a.createElement("div",{className:"subtituloH"},o.a.createElement("h1",null,"Lista de trabajos existentes")),o.a.createElement("div",{className:"PlanTrabajoGuia"},t&&t.length>0?t.map((e,a)=>o.a.createElement("div",{key:a,className:"activity-full-container"},o.a.createElement(fe,{activity:e}))):o.a.createElement("p",null,"No hay actividades pr\xf3ximas.")),o.a.createElement("div",{className:"page-buttons"},r?o.a.createElement("button",{type:"button",onClick:()=>{n(e),c(!1)}},"Devolverse"):o.a.createElement("button",{type:"button",onClick:()=>{const a=new Date,t=e.filter(e=>new Date(e.dateTime)>a&&("PLANEADA"===e.state||"NOTIFICADA"===e.state));if(t.length>0){const e=t.reduce((e,t)=>{const n=new Date(e.dateTime),l=new Date(t.dateTime);return n-a<l-a?e:t});n([e])}else n([]);c(!0)}},"Consultar \xdaltimo Proyecto")))};t(196);var Fe=()=>{const{user:e,actualizarUser:a}=P(),[t,n]=Object(l.useState)(!1),[r,c]=Object(l.useState)({nombre:"",apellido1:"",apellido2:"",celular:"",email:"",nombre2:"",sede:"",foto:"",fotoFile:null,uid:""});Object(l.useEffect)(()=>{e&&c({nombre:e.nombre||"",apellido1:e.apellido1||"",apellido2:e.apellido2||"",celular:e.celular||"",email:e.email||"",nombre2:e.nombre2||"",sede:e.sede||"",foto:e.foto||"",uid:e.uid||"",estudiante:e.estudiante})},[e]);return o.a.createElement(o.a.Fragment,null,o.a.createElement(M,{titulo:"Inicio",id:"navBar"}),o.a.createElement(E.a,null,o.a.createElement("title",null,"Plan de Trabajo - Tecnol\xf3gico de Costa Rica")),o.a.createElement("div",{className:"user-profile"},o.a.createElement("h1",{style:{color:"black"}},"Perfil del Usuario"),o.a.createElement("div",{className:"profile-photo-container"},r.foto&&o.a.createElement("img",{src:r.foto,alt:"Foto de perfil",className:"profile-photo"})),o.a.createElement("div",{className:"profile-info"},o.a.createElement("label",null,"Foto:"),o.a.createElement("input",{type:"file",name:"foto",onChange:e=>{const a=e.target.files[0];if(a){const e=new FileReader;e.onloadend=()=>{c(t=>({...t,foto:e.result,fotoFile:a}))},e.readAsDataURL(a)}}}),o.a.createElement("label",null,"Nombre:"),o.a.createElement("span",null,r.nombre),o.a.createElement("label",null,"Primer Apellido:"),o.a.createElement("span",null,r.apellido1),o.a.createElement("label",null,"Segundo Apellido:"),o.a.createElement("span",null,r.apellido2),o.a.createElement("label",null,"N\xfamero de tel\xe9fono:"),o.a.createElement("input",{type:"text",name:"celular",value:r.celular,onChange:e=>{const{name:a,value:t}=e.target;c(e=>({...e,[a]:t}))}}),o.a.createElement("label",null,"Email:"),o.a.createElement("span",null,r.email),o.a.createElement("label",null,"Sede:"),o.a.createElement("span",null,r.sede)),o.a.createElement("div",{className:"profile-actions"},o.a.createElement("button",{onClick:async()=>{try{let t={...r};if(r.fotoFile){const a=Object(A.c)(L,"profilePhotos/".concat(e.uid));await Object(A.d)(a,r.fotoFile);const n=await Object(A.a)(a);t.foto=n}await(async e=>{try{console.log(e);const a=["Admins","Profesores","Estudiantes"];let t=!1;const n={...e};if(e.fotoFile){const a=Object(A.c)(L,"profilePhotos/".concat(e.uid));await Object(A.d)(a,e.fotoFile);const t=await Object(A.a)(a);n.foto=t,delete n.fotoFile}for(const l of a){const a=Object(x.b)(D,l),o=Object(x.i)(a,Object(x.m)("email","==",e.email)),r=await Object(x.f)(o);if(!r.empty){const e=r.docs[0],a=e.ref,o=e.data();console.log("Found user in collection ".concat(l,":"),o),await Object(x.k)(a,n,{merge:!0}),console.log("User data updated successfully in collection: ".concat(l)),t=!0;break}}t||console.log("No se encontr\xf3 el documento del usuario en ninguna colecci\xf3n")}catch(a){console.error("Error updating user data:",a)}})(t),console.log("Datos del usuario actualizados:",t),a(t.email),n(!0)}catch(t){console.error("Error al actualizar los datos del usuario:",t)}}},"Guardar Cambios"))),t&&o.a.createElement("div",{className:"modal"},o.a.createElement("div",{className:"modal-content"},o.a.createElement("span",{className:"close",onClick:()=>n(!1)},"\xd7"),o.a.createElement("div",{className:"alert alert-success",role:"alert"},"Se guardaron los cambios. La p\xe1gina se actualizar\xe1 en breve."))))},Pe=t(103),Re=t(157),Ge=t.n(Re);t(309),t(310),t(311);var Ie=e=>{let{children:a,onClose:t}=e;return o.a.createElement("div",{className:"modal-backdrop"},o.a.createElement("div",{className:"modal-content"},o.a.createElement("button",{className:"modal-close",onClick:t},"\xd7"),a))};const Be=Object(Pe.b)(Ge.a);var Ue=()=>{const[e,a]=Object(l.useState)([]),[t,n]=Object(l.useState)(!1),[r,c]=Object(l.useState)(null);Object(l.useEffect)(()=>{s()},[]);const s=async()=>{const e=(await Object(x.f)(Object(x.b)(D,"activities"))).docs.map(e=>({id:e.id,...e.data(),dateTime:new Date(e.data().dateTime).toISOString()}));a(e)};return o.a.createElement(o.a.Fragment,null,o.a.createElement(M,{titulo:"Calendario",id:"navBar"}),o.a.createElement(E.a,null,o.a.createElement("title",null,"Calendario - Tecnol\xf3gico de Costa Rica")),o.a.createElement("div",{className:"calendar-container"},o.a.createElement(Pe.a,{localizer:Be,events:e,titleAccessor:"activityName",startAccessor:"dateTime",endAccessor:"dateTime",className:"calendar",onSelectEvent:e=>{c(e),n(!0)}}),o.a.createElement("div",{className:"button-container1"},o.a.createElement("button",{className:"button1",onClick:()=>{const a=new Date,t=e.filter(e=>new Date(e.dateTime)>a&&("PLANEADA"===e.state||"NOTIFICADA"===e.state));if(t.length>0){const e=t.reduce((e,t)=>{const n=new Date(e.dateTime),l=new Date(t.dateTime);return n-a<l-a?e:t});c(e),n(!0)}else console.log("No hay actividades futuras"),c(null),n(!1)}},"Consultar \xdaltimo Proyecto"))),t&&r&&o.a.createElement(Ie,{onClose:()=>n(!1)},o.a.createElement("h3",null,r.activityName),o.a.createElement("img",{src:r.poster}),o.a.createElement("p",null,o.a.createElement("strong",null,"Fecha:")," ",new Date(r.dateTime).toLocaleDateString()),o.a.createElement("p",null,o.a.createElement("strong",null,"Hora:")," ",new Date(r.dateTime).toLocaleTimeString()),o.a.createElement("p",null,o.a.createElement("strong",null,"Modalidad:")," ",r.modality),o.a.createElement("p",null,o.a.createElement("strong",null,"Estado:")," ",r.state.charAt(0).toUpperCase()+r.state.slice(1).toLowerCase())))};t(312);var _e=()=>{const[e,a]=Object(l.useState)(""),t=Object(i.q)();return o.a.createElement("div",{className:"forgot-password-container"},o.a.createElement("div",{className:"forgot-password-form"},o.a.createElement("h1",null,"Recuperar contrase\xf1a"),o.a.createElement("form",{onSubmit:async a=>{a.preventDefault();try{await Object(k.d)(T,e),alert("Se ha enviado un correo para restablecer la contrase\xf1a"),t("/iniciarSesion")}catch(n){alert("No se pudo enviar el correo de restablecimiento"),console.error("Error en resetPassword:",n)}}},o.a.createElement("label",{htmlFor:"email"},"Correo electr\xf3nico"),o.a.createElement("input",{type:"email",id:"email",name:"email",required:!0,value:e,onChange:e=>{a(e.target.value)}}),o.a.createElement("button",{type:"submit"},"Enviar"))))};var ze=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(E.a,null,o.a.createElement("link",{rel:"shortcut icon",href:U.a,type:"image/x-ico"})),o.a.createElement(R,null,o.a.createElement(s.a,null,o.a.createElement(i.e,null,o.a.createElement(i.c,{path:"/iniciarsesion",element:o.a.createElement(I,null)}),o.a.createElement(i.c,{path:"/historial",element:o.a.createElement(ae,null)}),o.a.createElement(i.c,{path:"/inicio",element:o.a.createElement(W,null)}),o.a.createElement(i.c,{path:"/equipoGuia",element:o.a.createElement(ne,null)}),o.a.createElement(i.c,{path:"/edicionGuia",element:o.a.createElement(oe,null)}),o.a.createElement(i.c,{path:"/planTrabajoGuia",element:o.a.createElement(Oe,null)}),o.a.createElement(i.c,{path:"/agregarActividad",element:o.a.createElement(Se,null)}),o.a.createElement(i.c,{path:"/ListaDeEstudiantes",element:o.a.createElement(we,null)}),o.a.createElement(i.c,{path:"/ListaDeEstudiantesProfesores",element:o.a.createElement(ke,null)}),o.a.createElement(i.c,{path:"/agregarProfesor",element:o.a.createElement(xe,null)}),o.a.createElement(i.c,{path:"/planTrabajoCentroAcademico",element:o.a.createElement(Le,null)}),o.a.createElement(i.c,{path:"/buzonEntrada",element:o.a.createElement(Te,null)}),o.a.createElement(i.c,{path:"/verEvidencia/:activityId",element:o.a.createElement(Ae,null)}),o.a.createElement(i.c,{path:"/perfil",element:o.a.createElement(Fe,null)}),o.a.createElement(i.c,{path:"/calendarioEstudiantes",element:o.a.createElement(Ue,null)}),o.a.createElement(i.c,{path:"/forgot-password",element:o.a.createElement(_e,null)}),o.a.createElement(i.c,{element:o.a.createElement(te,null)},o.a.createElement(i.c,{path:"/",element:o.a.createElement(W,null)})))),o.a.createElement(_,null)))};c.a.createRoot(document.getElementById("root")).render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(ze,null)))},84:function(e,a,t){e.exports=t.p+"static/media/userPhoto.453b4547.jpg"}},[[160,1,2]]]);
//# sourceMappingURL=main.3362d35c.chunk.js.map